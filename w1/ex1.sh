#!/bin/sh

WORDS="words"

# /usr/**/dict/words is not on my linux distribution
# I found a sample on users.cs.duke.edu

if [ ! -f "$WORDS" ]; then
  echo "Downloading words file sample"
  wget -q https://users.cs.duke.edu/~ola/ap/linuxwords -O $WORDS
fi

[ -r "$WORDS" ] || { echo "Cannot read $WORDS" ; exit 2 ; }

# Prints matching lines
extract()
{
  while IFS= read -r l; do
    lineLength=$(echo "$l" | tr -d '\n' | wc -c)
    if [ "$lineLength" -eq 5 ]; then
      middleChar=$(echo "$l" | cut -c 3)
      if [ "$middleChar" = "i" ]; then
        echo "$l"
      fi
    fi
  done < "$WORDS"
}

# Retrieve matching line
matchedLines=$(extract)
matchedLinesLength=$(echo "$matchedLines" | wc -l)
echo "$matchedLines"
echo "Number of words found : $matchedLinesLength"

# Example with https://users.cs.duke.edu/~ola/ap/linuxwords file
#
#~/system_software/w1 > ./ex1.sh
#abide
#acids
#adieu
#afire
#agile
#aging
#alias
#alibi
#Alice
#alien
#align
#alike
#alive
#amide
#Amiga
#amigo
#amino
#amiss
#amity
#anion
#anise
#Anita
#aping
#apish
#Aries
#arise
#Asian
#aside
#avian
#axial
#axing
#axiom
#Baird
#Bairn
#baits
#beige
#being
#blimp
#blind
#blink
#Blinn
#blips
#bliss
#blitz
#boils
#Boise
#Brian
#briar
#bribe
#Brice
#brick
#bride
#brief
#Brien
#brier
#brigs
#brine
#bring
#brink
#briny
#brisk
#Buick
#build
#built
#Caine
#cairn
#Cairo
#chick
#chide
#chief
#child
#Chile
#chili
#chill
#chime
#China
#Ching
#chink
#chins
#chips
#chirp
#click
#cliff
#climb
#clime
#cling
#clink
#Clint
#clips
#Clive
#coils
#coins
#cribs
#cried
#crier
#cries
#crime
#crisp
#daily
#dairy
#daisy
#deify
#deign
#deity
#doing
#dried
#drier
#dries
#drift
#drill
#drily
#drink
#drips
#drive
#dying
#edict
#Edith
#edits
#elide
#Eliot
#elite
#Emile
#Emily
#emits
#epics
#Erich
#evict
#evils
#Ewing
#exile
#exist
#exits
#eying
#fails
#faint
#fairs
#fairy
#faith
#feign
#flick
#flier
#flies
#fling
#flint
#flips
#flirt
#foils
#foist
#friar
#Frick
#fried
#fries
#frill
#frisk
#Frito
#Fritz
#gaily
#gains
#Geigy
#glide
#glint
#going
#grids
#grief
#grill
#grime
#Grimm
#grind
#grins
#gripe
#grips
#grist
#grits
#guide
#guild
#guile
#guilt
#guise
#Haifa
#hails
#hairs
#hairy
#Haiti
#Heine
#Heinz
#heirs
#hoist
#icing
#idiom
#idiot
#Iliad
#Irish
#Ising
#ivies
#jails
#Jaime
#joins
#joint
#juice
#juicy
#Keith
#Kline
#knife
#knits
#lairs
#Leigh
#Leila
#loins
#Loire
#lying
#maids
#Maier
#mails
#maims
#Maine
#mains
#maize
#Meier
#Meiji
#moist
#nails
#naive
#neigh
#noise
#noisy
#odium
#olive
#omits
#onion
#opium
#Orion
#owing
#oxide
#pails
#Paine
#pains
#paint
#pairs
#plied
#plies
#Pliny
#point
#poise
#Priam
#price
#prick
#pride
#prima
#prime
#print
#prior
#prism
#privy
#prize
#quick
#quiet
#quill
#quilt
#Quinn
#quint
#quirk
#quite
#Quito
#quits
#raids
#rails
#rains
#rainy
#raise
#Reich
#reign
#reins
#Rhine
#rhino
#ruins
#sails
#saint
#seize
#shied
#shies
#shift
#shill
#shine
#shiny
#ships
#shire
#shirk
#shirt
#Shiva
#skied
#skies
#skiff
#skill
#skimp
#skims
#skins
#skips
#skirt
#slice
#slick
#slide
#slime
#slimy
#sling
#slips
#slits
#smile
#smirk
#smite
#smith
#sniff
#snipe
#soils
#Spica
#spice
#spicy
#spies
#spike
#spill
#spilt
#spine
#spins
#spiny
#spire
#Spiro
#spite
#spits
#Spitz
#stick
#stiff
#stile
#still
#stilt
#sting
#stink
#stint
#stirs
#suing
#suite
#suits
#swift
#swims
#swine
#swing
#Swink
#swipe
#swirl
#swish
#swiss
#tails
#taint
#thick
#thief
#thigh
#thing
#think
#third
#toils
#trial
#tribe
#trick
#tried
#trier
#tries
#trill
#trims
#trips
#twice
#twigs
#twill
#twine
#twins
#twirl
#twist
#tying
#unify
#union
#unite
#units
#unity
#urine
#using
#Utica
#veils
#veins
#voice
#voids
#wails
#waist
#Waite
#waits
#waive
#weigh
#weird
#Weiss
#which
#while
#whims
#whine
#whips
#whirl
#whirr
#whisk
#white
#wring
#wrist
#write
#writs
#Zaire
#Zeiss
#Number of words found : 410
