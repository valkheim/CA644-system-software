#!/bin/sh

WORDS="words"

# /usr/**/dict/words is not on my linux distribution
# I found a sample on users.cs.duke.edu

if [ ! -f "$WORDS" ]; then
  echo "Downloading words file sample"
  wget -q https://users.cs.duke.edu/~ola/ap/linuxwords -O $WORDS
fi

[ -r "$WORDS" ] || { echo "Cannot read $WORDS" ; exit 2 ; }

# Prints matching lines
extract()
{
  while IFS= read -r l; do
    lineLength=$(echo "$l" | tr -d '\n' | wc -c)
    if [ "$lineLength" -eq 5 ]; then
      middleChar=$(echo "$l" | cut -c 3)
      if [ "$middleChar" = "l" ]; then
        echo "$l"
      fi
    fi
  done < "$WORDS"
}

# Retrieve matching line
matchedLines=$(extract)
matchedLinesLength=$(echo "$matchedLines" | wc -l)
echo "$matchedLines"
echo "Number of words found : $matchedLinesLength"

# Example with https://users.cs.duke.edu/~ola/ap/linuxwords file matching the middle i
#
#~/system_software/w1 > time ./ex1.sh
#abler
#Adler
#aglow
#Allah
#Allan
#allay
#Allen
#alley
#Allis
#allot
#allow
#alloy
#Allyn
#Arlen
#atlas
#axles
#baler
#bales
#balks
#balky
#balls
#balms
#balmy
#balsa
#belay
#belch
#belie
#Bella
#belle
#bells
#belly
#below
#belts
#Bilbo
#bilge
#bilks
#bills
#bolts
#Bulba
#bulbs
#bulge
#bulks
#bulky
#bulls
#bully
#bylaw
#Caleb
#calls
#calms
#calve
#Celia
#cells
#Chloe
#cilia
#Colby
#colds
#colon
#color
#colts
#culls
#culpa
#cults
#dales
#Daley
#delay
#Delft
#Delhi
#Delia
#Della
#dells
#delta
#delve
#dildo
#Dolan
#doled
#doles
#dolls
#dolly
#dulls
#dully
#Dylan
#Ellen
#Ellie
#Ellis
#Euler
#falls
#false
#Felix
#felon
#felts
#filed
#filer
#files
#fills
#filly
#films
#filth
#folds
#Foley
#folks
#folly
#fully
#Galen
#galls
#gilds
#Giles
#gills
#Golda
#golds
#golly
#gulch
#gulfs
#gulls
#gully
#gulps
#haler
#Haley
#halls
#halts
#halve
#Helen
#Helga
#helix
#hello
#hells
#helps
#hills
#hilts
#holds
#holed
#holes
#holly
#Holst
#hulls
#idled
#idler
#idles
#igloo
#inlay
#inlet
#Islam
#isles
#islet
#Jello
#jelly
#Jolla
#jolly
#jolts
#Jules
#Julia
#Julie
#Julio
#Kelly
#kills
#lilac
#Lilly
#lulls
#Malay
#males
#Malta
#malts
#melon
#melts
#Milan
#Miles
#milks
#milky
#Mills
#Milne
#molar
#molds
#moles
#Molly
#mules
#multi
#Nolan
#nulls
#nylon
#oiled
#oiler
#paled
#paler
#pales
#palms
#palsy
#pelts
#piled
#piles
#pills
#pilot
#polar
#poled
#poles
#polio
#polka
#polls
#pulls
#pulse
#rally
#Ralph
#relax
#relay
#relic
#Riley
#Rilke
#roles
#rolls
#ruled
#ruler
#rules
#salad
#Salem
#sales
#Salle
#Sally
#salon
#salts
#salty
#salve
#sells
#Selma
#Silas
#silks
#silky
#sills
#silly
#silts
#solar
#soles
#solid
#Solly
#Solon
#solos
#solve
#split
#sulfa
#sulks
#sulky
#Sylow
#tales
#talks
#tally
#Telex
#tells
#tilde
#tiled
#tiles
#tills
#tilts
#tolls
#tulip
#Tulsa
#Tyler
#vales
#valet
#valid
#valor
#value
#valve
#Vella
#villa
#Volta
#volts
#Volvo
#Waldo
#wales
#walks
#Walls
#Walsh
#waltz
#Welch
#welds
#Wells
#welsh
#wiles
#Wiley
#Willa
#Wills
#Willy
#Wilma
#wilts
#Wolfe
#Wolff
#Wylie
#Yalta
#yelps
#Zulus
#Number of words found : 287
#./ex1.sh  164,28s user 44,35s system 134% cpu 2:35,15 total
